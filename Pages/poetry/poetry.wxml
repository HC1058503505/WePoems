<!--Pages/poetry/poetry.wxml-->
<import src="../../wxParse/wxParse.wxml" />
<scroll-view scroll-y scroll-top="{{scrollTop}}">
  <block wx:if="{{isZhengwen && poetryinfo.name.length > 0}}">
    <!----正文--->
    <view class='poem'>
      <view class='poem_detail_content'>
        <view class='poetry_tool_view'>
          <view>
            <button class='poetry_collection' bindgetuserinfo='collectionAction' open-type='getUserInfo'>
              <image class='poetry_collection_img' src='../../Sources/images/no_collection.png'></image>
            </button>
          </view>
          <view>
            <button class='poetry_share' open-type='share'>
              <image class='poetry_share_img' src='../../Sources/images/share.png'></image>
            </button>
          </view>
          <view>
            <button class='poetry_more' bindtap='moreAction'>
              <image class='poetry_more_img' src='../../Sources/images/more.png'></image>
            </button>
          </view>
        </view>
        <view class='poem_author_content'>
          <text class='poem_author'>{{poetryinfo.dynasty}} / {{poetryinfo.poet.name}}</text>
          <template is="wxParse" data="{{wxParseData:poem_content.nodes}}" />
        </view>
      </view>

      <view class='poem_tags'>
        <view class='tag' wx:for="{{poetryinfo.tags}}" data-index="{{index}}" wx:key="{{item.poem_id}}">
          <text id='{{item}}' class='poem_tag' bindtap='poemTagTapAction'>{{item}}</text>
        </view>
      </view>
    </view>
  </block>

  <block wx:if="{{isYizhu}}">

    <view class='poetry_extension'>
      <template is="wxParse" data="{{wxParseData:poem_fanyi.nodes}}" />
    </view>

  </block>


  <block wx:if="{{isShangxi}}">

    <view class='poetry_extension'>
      <template is="wxParse" data="{{wxParseData:poem_shangxi.nodes}}" />
    </view>

  </block>
</scroll-view>

<!-- 切换选项 -->
<view class='poem_detail_tab'>
  <button class="{{isZhengwen ? 'didSelected' : 'normal'}}" id='zhengwen' bindtap='poemDetailTabAction'>正文</button>
  <button class="{{isYizhu ? 'didSelected' : 'normal'}}" id='yizhu' bindtap='poemDetailTabAction'>译注</button>
  <button class="{{isShangxi ? 'didSelected' : 'normal'}}" id='shangxi' bindtap='poemDetailTabAction'>赏析</button>
  <button class="{{isAuthor ? 'didSelected' : 'normal'}}" id='author' bindtap='poemDetailTabAction'>诗人</button>
</view>


<!-- 画布大小按需定制 这里我按照背景图的尺寸定的  -->
<canvas canvas-id="shareImg" hidden='true'></canvas>